import React, { useState } from 'react';
import { MapPin, X } from 'lucide-react';

interface BodyPart {
  id: string;
  name: string;
  path: string;
  view: 'front' | 'back';
}

const BODY_PARTS: BodyPart[] = [
  { id: 'head', name: 'Head', path: 'M158.39,38.64c16.91,11.73,34.79,11.81,51.71.22,2.78-1.9,5.22-5.54,7.15-10.35-.78-4.4-1.94-8.62-3.34-12.3-1.47-4.36-7.93-8.92-7.93-8.92,0,0,0,0,0,0-1.27-1.34-3.1-2.66-5.67-3.97-9.96-5.07-26.09-4.53-34.82,2.82-5.77,4.25-8.95,10.76-8.95,10.76-.67.91-1.34,2.49-2.02,4.26-1.02,2.67-1.76,5.87-2.22,9.26,1.75,3.77,3.82,6.63,6.1,8.21Z', view: 'front' },
  { id: 'face', name: 'Face', path: 'M211.79,41.34c-8.96,6.13-18.18,9.2-27.39,9.2s-18.66-3.15-27.72-9.44c-1.75-1.22-3.38-3.02-4.86-5.3-.28,6.4.41,12.96,2.13,17.87.98,2.81,3.6,5.91,4.05,7.95.71,3.22-2.29-.39-3.03,1.03,3.35,13.55-2.78,20.34,11.33,27.67,1.4.73,4.8,2.56,7.58,3.24h0s.11.03.11.03c.15.03.3.07.44.1l7.3,1.66c.69.47,1.67.73,3.12.71h.01s.01,0,.01,0c.42,0,.88-.04,1.39-.1.68-.08,1.21-.26,1.64-.5l6.53-1.3c2.36.01,14.81-6.42,16.57-8.49,3.79-4.47,2.03-17.52,3.99-23.51-.41-.42-3.89,1.02-2.99-1.49.6-1.66,3.53-4.63,4.48-7.53,1.86-5.69,2.19-12.49,1.53-19.21-1.8,3.28-3.89,5.82-6.21,7.41Z', view: 'front' },
  { id: 'neck', name: 'Neck', path: 'M208.09,92.16l-21.6,12.67-23.26-12.67c-1.01.92-4.48,11.76-2.25,16.99.61,1.42,5.05,5.67,9.97,10.09,8.14,7.31,20.44,7.42,28.73.28,5.24-4.52,10.04-8.91,10.66-10.37,2.24-5.24-1.24-16.08-2.25-16.99Z', view: 'front' },
  { id: 'chest', name: 'Chest', path: 'M249.24,186.59c-.23-.08-.72-.03-1,0-1.36.78-19.89,9.25-21.46,9.95-13.06,6.05-36.22,2.13-39.74-11.15h-3.01c-3.52,13.28-26.68,17.2-39.74,11.15-1.57-.7-20.1-9.18-21.46-9.95-.28-.03-.77-.08-1,0-3.64,10.29-1.79,21.48-1,32,.3,4.01.62,5.61,8.41,30.17.68.29-.82.89,3.52,5.57,19.61,19.2,50.51,21.22,50.51,21.22h4.54s30.9-2.02,50.51-21.22c4.34-4.69,2.84-5.28,3.52-5.57,7.79-24.56,8.11-26.16,8.41-30.17.79-10.52,2.64-21.71-1-32Z', view: 'front' },
  { id: 'abdomen', name: 'Abdomen', path: 'M232.8,326.55c-.34.45-33.58,32.17-43.68,34.5h-7.2c-10.09-2.33-43.34-34.05-43.68-34.5-8.05-10.59-13.65-41.69-9.41-67.51.19-1.12.46-2.4,1.95-2.55,2.15,7.29,23.6,22.21,51.34,25.24h6.8c27.74-3.03,49.19-17.95,51.34-25.24,1.5.15,1.76,1.43,1.95,2.55,4.25,25.82-1.36,56.92-9.41,67.51Z', view: 'front' },
  { id: 'left_shoulder', name: 'Left Shoulder', path: 'M237.11,133.15c.25-2.51-1.02-12.15,1.23-12.51,2-.33,17.98,7.12,20.77,8,17.88,7.55,22,19,22,19,0,0,.9,1.7,1,2,3.72,11.02,4.95,22.45,5.99,34-2.68-.02-21.8-13.5-24.5-14.01-1.45-.27-7.59-2.7-10.5-3.99-5.33-6.64-16.86-24.01-16-32.48Z', view: 'front' },
  { id: 'right_shoulder', name: 'Right Shoulder', path: 'M133.96,133.15c-.25-2.51,1.02-12.15-1.23-12.51-2-.33-17.98,7.12-20.77,8-17.88,7.55-22,19-22,19,0,0-.9,1.7-1,2-3.72,11.02-4.95,22.45-5.99,34,2.68-.02,21.8-13.5,24.5-14.01,1.45-.27,7.59-2.7,10.5-3.99,5.33-6.64,16.86-24.01,16-32.48Z', view: 'front' },
  { id: 'left_upper_arm', name: 'Left Upper Arm', path: 'M261.3,182.1c.36-11.45,16.51-.77,20.83,3.02,16.27,14.28,11.45,50.26,12.98,70l-1.98,13.5c-2.1-7.54-8.37-12.85-12.26-19.25-.74-1.22-1.54-2.74-2.36-4.48h0c-.14.2-9-4.4-9.44-4.98-3.42-4.48-11.95-32.09-11.95-41.28,0,0,4.15-15.42,4.18-16.53Z', view: 'front' },
  { id: 'right_upper_arm', name: 'Right Upper Arm', path: 'M109.77,182.1c-.36-11.45-16.51-.77-20.83,3.02-16.27,14.28-11.45,50.26-12.98,70l1.98,13.5c2.1-7.54,8.37-12.85,12.26-19.25.74-1.22,1.54-2.74,2.36-4.48h0c.14.2,9-4.4,9.44-4.98,3.42-4.48,11.95-32.09,11.95-41.28,0,0-4.15-15.42-4.18-16.53Z', view: 'front' },
  { id: 'left_forearm', name: 'Left Forearm', path: 'M272.17,246.68c2.44,1.91,8.65,7.92,10.47,10.12,7.38,8.93,8.91,11.28,12.32,19.78.97-7.64,5.16-19.35,2.43-39.29l6.55,4.54c7.6,11.03,10.48,25.66,12.93,38.94,3.9,21.14,6.89,31.2,15.15,51.65,1.49,3.69,2.73,7.44,5.09,10.71-1.01,1.63-2.21-.34-3-1-3.18-2.64-21.01-2.26-21,17.49-2.28.42-1.6-.12-2.23-1.27-3.96-7.23-6.9-19.44-10.3-27.69-9.27-22.49-19.54-44.69-27.23-67.77-1.96-5.88-3.31-9.9-1.18-16.21Z', view: 'front' },
  { id: 'right_forearm', name: 'Right Forearm', path: 'M98.9,246.68c-2.44,1.91-8.65,7.92-10.47,10.12-7.38,8.93-8.91,11.28-12.32,19.78-.97-7.64-5.16-19.35-2.43-39.29l-6.55,4.54c-7.6,11.03-10.48,25.66-12.93,38.94-3.9,21.14-6.89,31.2-15.15,51.65-1.49,3.69-2.73,7.44-5.09,10.71,1.01,1.63,2.21-.34,3-1,3.18-2.64,21.01-2.26,21,17.49,2.28.42,1.6-.12,2.23-1.27,3.96-7.23,6.9-19.44,10.3-27.69,9.27-22.49,19.54-44.69,27.23-67.77,1.96-5.88,3.31-9.9,1.18-16.21Z', view: 'front' },
  { id: 'left_hand', name: 'Left Hand', path: 'M347.1,369.72c1.45,9.46,23.51,14.72,23.97,3.96-3.77-1.43-7.31-3.17-10.94-4.46,0,0,.02,0,.02,0-6.58-10.45-15.16-22.51-30.09-23.04l-7.35.22c-5.42,4.78-5.74,4.68-6.56,13.77-.39,4.31-2.5,7.38-2.95,11.04-1.09,8.73,1.68,12.4,6.95,17.5,0,0,4.69,8.43,4.69,8.44,2.16,2.48,13.63,18.56,14.7,17.69,3.7-.72-7.23-18.76-7.4-19.28-.44-1.4-2.07-4.59-2.7-6.26,0-.02-.01-.04-.02-.06.81,1.43,1.85,2.65,3.13,3.47,2.09,1.34,12.06,27.14,14.45,29.1,1.8,1.47,5.85,1.79,4.32-3.29-.75-2.5-13.1-28.32-13.59-30.58.15-.45.35-.93.58-1.43,3.27,7.22,14.61,29.55,15.96,31.47.95,1.36,3.24,1.72,4.76.92,1.83-.56.9-3.85.63-4.7-.41-1.31-12.86-24.34-17.97-32.47.37-.37.76-.73,1.17-1.08.17.32.35.64.53.96,1.13,2.01,15.7,29.66,17.86,30.36,2.07.67,3.79-1.36,3.83-2.74.08-2.68-14.59-29.46-16.89-31.92,0,0-.01-.01-.02-.02-.04-1.12-1.66-4.42-3.16-6.26.65-.58,1.34-1.05,2.08-1.3Z', view: 'front' },
  { id: 'right_hand', name: 'Right Hand', path: 'M57.87,371.21c-.46-3.66-2.57-6.73-2.95-11.04-.82-9.09-1.14-8.99-6.56-13.77l-7.35-.22c-11.95,2.67-23,12.67-29.64,22.88-3.79,1.3-7.46,3.13-11.37,4.61.5,11.53,25.79,4.67,23.96-6.04,1.28.15,2.49,1.02,3.62,2.13-1.41.28-3.96,4.74-4.57,6.83-.05.06-.1.11-.14.16-2.31,2.46-16.97,29.77-16.89,32.45.04,1.38,1.76,3.41,3.83,2.74,2.16-.7,16.73-28.88,17.86-30.9.11-.19.22-.39.33-.59.67.55,1.27,1.12,1.82,1.72-5.64,9.17-18.03,30.76-18.42,32-.27.85-1.2,4.14.63,4.7,1.52.8,3.8.44,4.76-.92,1.25-1.78,12-21.82,16.34-30.58.07.18.14.37.2.54,2.97.85-12.84,28.08-13.59,30.58-1.53,5.09,2.52,4.76,4.32,3.29,2.4-1.96,14.16-32.01,17.65-31.32,1.75.35-13.59,25.44-10.74,25.14,3.34,3.34,17.9-22.77,18.57-25.08,0,0,0,0,0,0,5.27-5.1,9.43-10.6,8.34-19.33Z', view: 'front' },
  { id: 'left_thigh', name: 'Left Thigh', path: 'M192.12,465.82s-1.64-11.06-1.76-11.93c-2.1-14.31-.92-35.26-1.33-50.46,13.71-27.55,58.68-37.21,62.22-37.64.17,5.73.16,11.51-.1,17.38-.88,20.26-4.37,40.51-7.52,60.48l-.98,3.09-7.55,25.94h0c-2.33,15.22-5.2,30.55-6.88,45.57-.79,7.08-.84,14.32-1.61,21.37-5.81-9.04-14.25-26.05-18.33-36.9-.79-2.1-3.58-2.49-4.94-.71,0,0-4.77,13.04-5.87,18.49-1.69,8.36-1.44,21.63-1.86,30.13-10.18-26.7-9.58-56.7-3.48-84.83,0,0,0,.02,0,.02Z', view: 'front' },
  { id: 'right_thigh', name: 'Right Thigh', path: 'M178.94,465.82s1.64-11.06,1.76-11.93c2.1-14.31.92-35.26,1.33-50.46-13.71-27.55-58.68-37.21-62.22-37.64-.17,5.73-.16,11.51.1,17.38.88,20.26,4.37,40.51,7.52,60.48l.98,3.09,7.55,25.94h0c2.33,15.22,5.2,30.55,6.88,45.57.79,7.08.84,14.32,1.61,21.38,5.81-9.04,14.25-26.05,18.33-36.9.79-2.1,3.58-2.49,4.94-.71,0,0,4.77,13.04,5.87,18.49,1.69,8.36,1.44,21.63,1.86,30.13,10.18-26.7,9.58-56.7,3.48-84.83,0,0,0,.02,0,.02Z', view: 'front' },
  { id: 'left_knee', name: 'Left Knee', path: 'M205.32,510.52c-1.77,7.57-7.03,30.93-7.24,42.66l11.06,19.53c3.5-4.19,7.23-10.64,7.09-14.08-.23-6.1-1.05-17.21-5.61-38.01-.22-.98-2.49-6.86-3.81-10.21-.28-.72-1.32-.65-1.5.1Z', view: 'front' },
  { id: 'right_knee', name: 'Right Knee', path: 'M165.75,510.52c1.77,7.57,7.03,30.93,7.24,42.66l-11.06,19.53c-3.5-4.19-7.23-10.64-7.09-14.08.23-6.1,1.05-17.21,5.61-38.01.22-.98,2.49-6.86,3.81-10.21.28-.72,1.32-.65,1.5.1Z', view: 'front' },
  { id: 'left_calf', name: 'Left Lower Leg', path: 'M188.06,725.18c.13,1.71-.11,3.31,1.56,4.44.62-4.96,3.36-12.15,7.05-16.94,3.79-4.92,13.87-10.05,15.78-16.22.61-1.98,1.27-8.02.49-11.47h0s10.77-39.17,10.77-39.17h0c5.69-18.07,9.78-36.84,10.44-47.66,1.17-19.25-3.91-48.04-14.85-64.24-.87-1.29-1.13-2.73-3.19-2.3,2.07,14.76,5.07,19.42,3.54,34.27l-10.75,13.7-13.99-23.1s-1.35,1.73-1.69,2.78c-3.62,11.29-4.83,34.06-4.1,45.82,1.28,20.46,11.83,54.26,6.29,73.31-2.4,8.27-8.09,16.82-7.29,26.2,0,0-.43,15.7-.06,20.55Z', view: 'front' },
  { id: 'right_calf', name: 'Right Lower Leg', path: 'M182.95,704.63c.8-9.38-4.89-17.92-7.29-26.2-5.54-19.06,5.01-52.85,6.29-73.31.74-11.77-.47-34.54-4.1-45.82-.34-1.05-1.69-2.78-1.69-2.78l-13.99,23.1-10.75-13.7c-1.53-14.85,1.47-19.51,3.54-34.27-2.06-.43-2.32,1.01-3.19,2.3-10.94,16.19-16.02,44.98-14.85,64.24.66,10.82,4.75,29.58,10.44,47.66h0s10.77,39.16,10.77,39.16h0c-.77,3.45-.12,9.5.49,11.47,1.92,6.17,11.99,11.3,15.78,16.22,3.69,4.79,6.43,11.98,7.05,16.94,1.67-1.14,1.43-2.73,1.56-4.44.37-4.85-.06-20.55-.06-20.55Z', view: 'front' },
  { id: 'left_foot', name: 'Left Foot', path: 'M188.18,766.84l-.28-1.69.22-7.52c-1.79-19.27,4.37-39.43,19.99-51.5,1-.78,1.27-1.94,3-1.49-4.09,6.51,8.18,45.32,8.78,53.38-2.39,4.18-12.44,13.15-17.15,11.51l-3.53,7.28-2.63.49c-1.97,1.15-4.63,1.66-6.43,1.2h-.02s0,0,0,0c-.91-.24-1.6-.72-1.86-1.5-1.01-3.06-.83-6.62-.08-10.15Z', view: 'front' },
  { id: 'right_foot', name: 'Right Foot', path: 'M182.89,766.84l.28-1.69-.22-7.52c1.79-19.27-4.37-39.43-19.99-51.5-1-.78-1.27-1.94-3-1.49,4.09,6.51-8.18,45.32-8.78,53.38,2.39,4.18,12.44,13.15,17.15,11.51l3.53,7.28,2.63.49c1.97,1.15,4.63,1.66,6.43,1.2h.02s0,0,0,0c.91-.24,1.6-.72,1.86-1.5,1.01-3.06.83-6.62.08-10.15Z', view: 'front' },
  // Back view parts
  { id: 'back_of_head', name: 'Back of Head', path: 'M158.8,84.53l3.47,2.02c1.14-14.77,5.66-30.41,23.5-30.07,17.56.33,21.67,16.51,22.52,31.08,6.72-2.08,4.34-9.09,5.11-14.38,3.37-22.89,13.9-59.53-15.85-70.4-34.08-12.45-47.82,19.39-44.14,48.14,1.43,11.15,4.52,22.32,5.39,33.61Z', view: 'back' },
  { id: 'back_of_neck', name: 'Back of Neck', path: 'M171.26,65.55c-10.33,9.86-4.02,27.58-9.48,39.01-3.12,6.55-9.82,7.37-14.51,11.99h23.5c1.05,0,5.99-3.78,7.03-4.97,6.85-7.82,5.48-19.65,7.97-29.04,1.38,9.74.78,22.24,8.1,29.91.69.72,5.54,4.1,5.9,4.1h23.5c-4.61-4.72-12.65-6.72-15.22-13.28-4.43-11.33,1.56-28.16-8.77-37.71-.74,5.27.78,10.33,1.04,15.45.06,1.17.7,5.54-1.04,5.54l-2.17-23.34c-1.71-5.02-20.71-5-23.35-.67-1.47,2.41-.97,19.7-2.49,24.01-1.7-.06-2.12.67-1.77-1.26,1.18-6.52,2.14-13.1,1.77-19.74Z', view: 'back' },
  { id: 'upper_back', name: 'Upper Back', path: 'M254.57,187.05c-.19-.69.31-2.61-.81-7.22.22-1.08-.03-2.1-.64-3.32-7.28-14.5-19.14-25.11-23.19-28.47h-86.94c-1.38,0-2.7.49-3.74,1.4-5.01,4.39-15.09,14.19-21.55,27.07-.61,1.21-.86,2.24-.64,3.32-1.12,4.61-.61,6.53-.81,7.22-.82,2.91,0,13.94,0,18,0,3.36,2.66,11.51,3.98,15.02,3.99,10.67,12.58,22.04,25.38,21.41,10.47-.52,31.42-24.84,37.4-32.61h4.77c5.98,7.77,26.93,32.1,37.4,32.61,12.81.63,21.39-10.74,25.38-21.41,1.31-3.51,3.98-11.66,3.98-15.02,0-4.06.82-15.09,0-18Z', view: 'back' },
  { id: 'lower_back', name: 'Lower Back', path: 'M245.44,297.28c-4.89-15.49-2.51-32.46-.18-42.6,1-2.96,1.84-6,2.54-9.06.02-.04.03-.07.03-.07h-.01c1.48-6.47,2.36-13.01,2.75-19-2.24,1.86-4.7,7.71-7.02,10.47-6.84,8.14-17.37,9.41-27.28,5.94-10.49-5.04-24.91-26.02-27.96-27.8h-5.78c-3.05,1.77-17.47,22.76-27.96,27.8-9.91,3.47-20.44,2.2-27.28-5.94-2.32-2.76-4.78-8.61-7.02-10.47.39,5.99,1.27,12.53,2.75,19h-.01s.01.03.03.07c.7,3.06,1.54,6.1,2.54,9.06,2.33,10.14,4.71,27.11-.18,42.6-.53.87-1.04,2.95-1.13,3.27-2.24,7.75-2.4,23.86-4,31.93.22.13,22.47-32.26,43.33-30.22,7.86,7.65,20.26,6.9,20.26,6.9h3.52s12,.75,19.86-6.9c20.86-2.03,43.11,30.35,43.33,30.22-1.6-8.07-1.76-24.18-4-31.93-.09-.32-.6-2.4-1.13-3.27Z', view: 'back' },
  { id: 'left_shoulder_back', name: 'Left Shoulder', path: 'M171.2,122.13c-10.28-5.8-31.88-1.77-42.92,1.43,0,0-8.91,2.15-13,3.99-5.11,2.3-12.17,6.72-17.71,11.34.28,20.8,11.12,33.39,15.31,37.47,2.95-5.73,8.15-13.54,12.41-17.81,4.04-4.07,7.79-8.33,12.08-12.14,1.06-.94,2.42-1.47,3.83-1.47l40.61.1c-1.68-9.26-4.9-19.7-10.6-22.91Z', view: 'back' },
  { id: 'right_shoulder_back', name: 'Right Shoulder', path: 'M199.65,122.13c10.28-5.8,31.88-1.77,42.92,1.43,0,0,8.91,2.15,13,3.99,5.11,2.3,12.17,6.72,17.71,11.34-.28,20.8-11.12,33.39-15.31,37.47-2.95-5.73-8.15-13.54-12.41-17.81-4.04-4.07-7.79-8.33-12.08-12.14-1.06-.94-2.42-1.47-3.83-1.47l-40.61.1c1.68-9.26,4.9-19.7,10.6-22.91Z', view: 'back' },
  { id: 'left_upper_arm_back', name: 'Left Upper Arm', path: 'M94.63,141.49c-1.82,1.74-3.34,3.46-4.35,5.05-4.26,6.7-5.1,16.58-7,31l-1,8c-.04.33.05.67,0,1-.54,3.75-4.54,21.65-3.02,30.15-1.57,9.8-2.69,18.94-.75,28.58.51,2.52,2.22,4.67,4.59,5.65.24.1.47.18.66.22,1.86.41,6.2-.57,6.53-.59,10.94-2.65,16.01-16.8,18.5-23.04.21-.53.31-1.26.37-1.95,1.62-6.12,2.35-14.44,2.75-17.01,1.39-8.91.49-19.48.39-28.64-2.55-2.13-16.45-14.82-17.65-38.41Z', view: 'back' },
  { id: 'right_upper_arm_back', name: 'Right Upper Arm', path: 'M276.22,141.49c1.82,1.74,3.34,3.46,4.35,5.05,4.26,6.7,5.1,16.58,7,31l1,8c.04.33-.05.67,0,1,.54,3.75,4.54,21.65,3.02,30.15,1.57,9.8,2.69,18.94.75,28.58-.51,2.52-2.22,4.67-4.59,5.65-.24.1-.47.18-.66.22-1.86.41-6.2-.57-6.53-.59-10.94-2.65-16.01-16.8-18.5-23.04-.21-.53-.31-1.26-.37-1.95-1.62-6.12-2.35-14.44-2.75-17.01-1.39-8.91-.49-19.48-.39-28.64,2.55-2.13,16.45-14.82,17.65-38.41Z', view: 'back' },
  { id: 'left_forearm_back', name: 'Left Forearm', path: 'M35.8,344.29l18.47-60.24c0-.12.07-.39.18-.77-.16-2.04,2.86-12.51,2.92-17.07,1.05-9.46,8.98-25.12,16.9-29.66-.35,2.74,3.19,30.31,22.51,13.01,2.25-.42,1.39.99,1.49,2.48.7,9.62-4.83,15.13-7.78,23.23-3.43,9.4-6,18.9-9.76,28.24-6.03,14.99-14.55,33.48-20.97,48.31,0,0-11.55-9.45-23.98-7.54Z', view: 'back' },
  { id: 'right_forearm_back', name: 'Right Forearm', path: 'M335.05,344.29l-18.47-60.24c0-.12-.07-.39-.18-.77.16-2.04-2.86-12.51-2.92-17.07-1.05-9.46-8.98-25.12-16.9-29.66.35,2.74-3.19,30.31-22.51,13.01-2.25-.42-1.39.99-1.49,2.48-.7,9.62,4.83,15.13,7.78,23.23,3.43,9.4,6,18.9,9.76,28.24,6.03,14.99,14.55,33.48,20.97,48.31,0,0,11.55-9.45,23.98-7.54Z', view: 'back' },
  { id: 'left_hand_back', name: 'Left Hand', path: 'M42.58,348.16c-1.26-.04-2.32.06-3.27.27-2.1.2-4.72.48-6.24.82-11.8,1.78-15.86,15.62-24.5,21.99-3.68,2.71-10.6,3.05-8,8.01,2.41,4.59,17.12-.16,19.96-3.05,2.97-3.03,3.82-7.91,5.68-11.36.49-.9,1.6-1.3,1.83-1.55h.02c-1.77,4.89-5.8,13.06-7.49,17.95-1.09.99-12.11,24.48-12.4,26.6-.25,1.79-.09,3.62-.08,5.41.91-.09,1.96.27,2.81-.22,1.29-.74,12.83-24.23,15.25-30.21.59.36,1.14.78,1.67,1.23-4.6,8.41-15.64,30.29-16.28,33.2-.89,4.07,1.03,7.51,4.91,4.89,3.38-2.28,10.77-24.66,15.49-33.27.56.78,1.12,1.57,1.68,2.34-3.65,8.29-11.76,27.19-12.64,29.09-1.08,2.32,4.18,2.35,6.41-.88.78-1.13,7.94-16.88,10.67-23.45.69.47,1.44.84,2.23,1.06-3.18,5.55-5.86,13.06-8.07,16.89-.16,1.86,1.59,2.73,3.24,2.22,1.44-.45,10.51-17.76,12.74-23.74,4.04-4.59,7.48-10.99,8.42-16.11.67-3.68,1.18-18.27.26-21.35-.8-2.67-11.37-6.69-14.3-6.78Z', view: 'back' },
  { id: 'right_hand_back', name: 'Right Hand', path: 'M362.28,371.25c-8.64-6.37-12.7-20.21-24.5-21.99-1.52-.34-4.14-.63-6.24-.82-.95-.22-2.02-.31-3.27-.27-2.92.1-13.5,4.11-14.3,6.78-.92,3.08-.41,17.67.26,21.35.93,5.12,4.38,11.52,8.42,16.11,2.23,5.98,11.3,23.29,12.74,23.74,1.65.51,3.41-.36,3.24-2.22-2.21-3.83-4.89-11.34-8.07-16.89.79-.22,1.54-.59,2.23-1.06,2.74,6.57,9.89,22.32,10.67,23.45,2.22,3.23,7.48,3.2,6.41.88-.88-1.9-8.99-20.79-12.64-29.09.57-.77,1.12-1.56,1.68-2.34,4.72,8.62,12.11,30.99,15.49,33.27,3.89,2.62,5.8-.81,4.91-4.89-.64-2.91-11.67-24.79-16.28-33.2.52-.46,1.08-.87,1.67-1.23,2.42,5.98,13.97,29.47,15.25,30.21.85.49,1.89.14,2.81.22,0-1.79.16-3.62-.08-5.41-.29-2.12-11.31-25.61-12.4-26.6-1.69-4.9-5.72-13.06-7.49-17.94h.02c.23.24,1.34.64,1.83,1.54,1.86,3.45,2.71,8.33,5.68,11.36,2.83,2.89,17.55,7.64,19.96,3.05,2.6-4.96-4.32-5.29-8-8.01Z', view: 'back' },
  { id: 'left_thigh_back', name: 'Left Thigh', path: 'M142.79,534.54s15.02-41.93,15.8-44.94c5.57,25.55,19.11,36.96,15.8,59.58-.16,1.11-.92,3.6.87,3.37,12.62-41.16,5.09-125.16,5.76-171.33.33-3.62.43-5.99.15-6.19-11.9,14.23-47.35,15.29-62.52,13.2,1.74,14.47,6.15,42.41,7.95,55.52l12.77,61.26c-.21,10.13-1.37,20.84,3.44,29.54ZM139.37,500.98c.02,1.33.02,2.66-.01,4.02-.02-1.23-.02-2.58.01-4.02Z', view: 'back' },
  { id: 'right_thigh_back', name: 'Right Thigh', path: 'M189.68,375.01c-.28.2-.18,2.57.15,6.19.67,46.18-6.87,130.17,5.76,171.33,1.78.23,1.03-2.25.87-3.37-3.3-22.62,10.23-34.03,15.8-59.58.78,3.01,15.8,44.94,15.8,44.94,4.81-8.7,3.65-19.42,3.44-29.54l12.77-61.26c1.79-13.11,6.21-41.05,7.95-55.52-15.18,2.1-50.62,1.03-62.52-13.2ZM231.49,504.99c-.03-1.35-.03-2.69-.01-4.02.03,1.43.04,2.78.01,4.02Z', view: 'back' },
  { id: 'left_upper_calf_back', name: 'Left Lower Leg', path: 'M150.76,608.61c4.58-.2,8.84-.26,9.19-3.58l3.77,9.57c4.13,7.5,12.12,12.41,15.5,1.39,5.82-18.97-4.94-34.99-6.84-52.05-1.3-11.66-.05-20.73-2.54-32.3l-12.06-25.09s-15.62,41.53-18.19,53.81c-2.54,12.1-9.91,49.17,11.17,48.25Z', view: 'back' },
  { id: 'right_upper_calf_back', name: 'Right Lower Leg', path: 'M213.07,506.55l-12.06,25.09c-2.49,11.57-1.24,20.64-2.54,32.3-1.9,17.06-12.66,33.09-6.84,52.05,3.38,11.02,11.38,6.1,15.5-1.39l3.77-9.57c.35,3.31,4.62,3.38,9.19,3.58,21.08.92,13.71-36.15,11.17-48.25-2.58-12.27-18.19-53.81-18.19-53.81Z', view: 'back' },
  { id: 'left_foot_back', name: 'Left Foot', path: 'M158.05,676.36c.33,5.28-1.02,11.73-.77,17.7.05,1.21-.75,3.72.99,3.49-.37-11.8,8.7-23.47,21-17-.76-6.24-4.44-10.99-5.04-17.45-1.22-13.19,4.05-27.27,4.03-40.54-8.33,6.24-17.04-2.76-19.04-10.99-4.91,2.07-9.14,4.47-17.78-2.21-2.42-1.87-4.87-7.2-4.76-6.33,2.1,15.98,10.24,33.22,14.86,48.77,1.94,6.51,6.12,18.35,6.51,24.58Z', view: 'back' },
  { id: 'right_foot_back', name: 'Right Foot', path: 'M229.4,609.35c-8.64,6.69-12.87,4.29-17.78,2.21-2.01,8.23-10.71,17.23-19.04,10.99-.02,13.27,5.26,27.35,4.03,40.54-.6,6.46-4.27,11.21-5.04,17.45,12.31-6.47,21.37,5.2,21,17,1.74.23.94-2.27.99-3.49.24-5.97-1.1-12.42-.77-17.7.39-6.23,4.57-18.06,6.51-24.58,4.62-15.54,12.76-32.78,14.86-48.77.12-.87-2.34,4.46-4.76,6.33Z', view: 'back' },
];

interface BodyMapSelectorProps {
  selectedSites?: string[];
  onSitesChange?: (sites: string[]) => void;
}

export const BodyMapSelector: React.FC<BodyMapSelectorProps> = ({ selectedSites = [], onSitesChange }) => {
  const [view, setView] = useState<'front' | 'back'>('front');

  const handlePartClick = (partId: string) => {
    if (!onSitesChange) return;
    
    const newSites = selectedSites.includes(partId)
      ? selectedSites.filter(site => site !== partId)
      : [...selectedSites, partId];
    onSitesChange(newSites);
  };

  const removeSite = (siteId: string) => {
    if (onSitesChange) {
      onSitesChange(selectedSites.filter(s => s !== siteId));
    }
  };

  const visibleParts = BODY_PARTS.filter(part => part.view === view);

  return (
    <div className="space-y-4">
      {/* View Toggle */}
      <div className="flex gap-2">
        <button
          onClick={() => setView('front')}
          className={`flex-1 px-4 py-2 rounded-lg text-sm font-medium ${
            view === 'front'
              ? 'bg-blue-500 text-white'
              : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
          }`}
        >
          Front
        </button>
        <button
          onClick={() => setView('back')}
          className={`flex-1 px-4 py-2 rounded-lg text-sm font-medium ${
            view === 'back'
              ? 'bg-blue-500 text-white'
              : 'bg-slate-100 text-slate-600 hover:bg-slate-200'
          }`}
        >
          Back
        </button>
      </div>

      {/* Body Map SVG */}
      <div className="flex justify-center bg-slate-50 rounded-lg p-4">
        <svg 
          width="300" 
          height="600" 
          viewBox={view === 'front' ? "0 0 371.07 778.67" : "0 0 370.85 779.3"} 
          className="cursor-pointer"
        >
          {visibleParts.map((part) => {
            const isSelected = selectedSites.includes(part.id);
            return (
              <path
                key={part.id}
                id={part.id}
                d={part.path}
                fill={isSelected ? '#1a86f0' : '#bababa'}
                stroke={isSelected ? '#1570d1' : 'transparent'}
                strokeWidth="2"
                className="hover:opacity-80 transition-opacity"
                onClick={() => handlePartClick(part.id)}
                style={{ cursor: 'pointer' }}
              />
            );
          })}
        </svg>
      </div>

      {/* Selected Sites */}
      {selectedSites.length > 0 && (
        <div className="space-y-2">
          <p className="text-sm font-semibold text-slate-700">Selected Application Sites:</p>
          <div className="flex flex-wrap gap-2">
            {selectedSites.map((siteId) => {
              const part = BODY_PARTS.find(p => p.id === siteId);
              return (
                <span
                  key={siteId}
                  className="inline-flex items-center gap-2 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-full text-sm"
                >
                  <MapPin className="w-4 h-4" />
                  {part?.name || siteId}
                  <button
                    onClick={() => removeSite(siteId)}
                    className="hover:bg-blue-200 rounded-full p-0.5"
                  >
                    <X className="w-3 h-3" />
                  </button>
                </span>
              );
            })}
          </div>
        </div>
      )}

      {/* Quick Selection */}
      <div className="space-y-2">
        <p className="text-sm font-semibold text-slate-700">Quick Selection:</p>
        <div className="flex flex-wrap gap-2">
          {[
            { id: 'left_upper_arm', name: 'Left Upper Arm' },
            { id: 'right_upper_arm', name: 'Right Upper Arm' },
            { id: 'left_thigh', name: 'Left Thigh' },
            { id: 'right_thigh', name: 'Right Thigh' },
            { id: 'chest', name: 'Chest' },
            { id: 'abdomen', name: 'Abdomen' }
          ].map((site) => {
            const isSelected = selectedSites.includes(site.id);
            return (
              <button
                key={site.id}
                onClick={() => handlePartClick(site.id)}
                className={`px-3 py-1.5 rounded-lg text-xs font-medium border ${
                  isSelected
                    ? 'bg-blue-500 text-white border-blue-500'
                    : 'bg-white text-slate-600 border-slate-300 hover:bg-slate-50'
                }`}
              >
                {site.name}
              </button>
            );
          })}
        </div>
      </div>
    </div>
  );
};

